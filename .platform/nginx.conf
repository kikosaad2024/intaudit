http {
    # Define a limit zone for IP addresses
    limit_req_zone $binary_remote_addr zone=mylimit:10m rate=10r/s;

    server {
        listen 80;
        server_name example.com;

        # Apply the rate limiting
        location / {
            limit_req zone=mylimit burst=20 nodelay;
            # Serve static files from the /web directory
            root /app/web;
            index index.html;
        }

        # Handle errors
        error_page 429 = /error_429.html;
        location = /error_429.html {
            root /app/web;
            internal;
        }
    }
}
